

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>git.repo.base | pyCATHY v0.1.1</title>
    

    
  <link href="../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script src="../../../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="shortcut icon" href="../../../_static/sphx_glr_pyCATHY_weilletal_thumb.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <!-- Plausible analytics for anonymous usage statistics -->
    <script defer data-domain="fatiando.org" src="https://plausible.io/js/plausible.js"></script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/sphx_glr_pyCATHY_weilletal_001.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">pyCATHY <span class="project-release">v0.1.1</span></h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/installing.html">
   Installing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/citing.html">
   Citing pyCATHY
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Gallery of examples
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../content/SSHydro/index.html">
   Surface subsurface hydrological model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/SSHydro/plot_1_pyCATHY_weilletal.html">
     Weil et al example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/SSHydro/plot_2_pyCATHY_inputs.html">
     Input plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/SSHydro/plot_3_meshing_from_weil.html">
     Meshing from a Digital Elevation Model (DEM)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/SSHydro/plot_3b_soil3d_from_weil.html">
     Soil 3d from a Digital Elevation Model (DEM)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/SSHydro/plot_4_pyCATHY_outputs.html">
     Output plots
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../content/DA/index.html">
   Data Assimilation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../content/DA/plot_Weilletal_sensitivityAnalysis.html">
     Sensitivity analysis
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../content/api/api.html">
   API reference: The
   <code class="docutils literal notranslate">
    <span class="pre">
     pyCATHY
    </span>
   </code>
   package
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/cathy_tools.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       cathy_tools
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.CATHY.html">
       cathy_tools.CATHY
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.OrderedDict.html">
       cathy_tools.OrderedDict
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.Repo.html">
       cathy_tools.Repo
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.isfile.html">
       cathy_tools.isfile
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.join.html">
       cathy_tools.join
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.listdir.html">
       cathy_tools.listdir
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.make_console.html">
       cathy_tools.make_console
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.print.html">
       cathy_tools.print
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/cathy_tools.subprocess_run_multi.html">
       cathy_tools.subprocess_run_multi
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       importers.cathy_outputs
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_cumflowvol.html">
       importers.cathy_outputs.read_cumflowvol
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_dtcoupling.html">
       importers.cathy_outputs.read_dtcoupling
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_hgraph.html">
       importers.cathy_outputs.read_hgraph
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_hgsfdet.html">
       importers.cathy_outputs.read_hgsfdet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_mbeconv.html">
       importers.cathy_outputs.read_mbeconv
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_psi.html">
       importers.cathy_outputs.read_psi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_sw.html">
       importers.cathy_outputs.read_sw
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_vp.html">
       importers.cathy_outputs.read_vp
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_outputs.read_wtdepth.html">
       importers.cathy_outputs.read_wtdepth
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       importers.cathy_inputs
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_atmbc.html">
       importers.cathy_inputs.read_atmbc
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_dem.html">
       importers.cathy_inputs.read_dem
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_dem_parameters.html">
       importers.cathy_inputs.read_dem_parameters
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_grid3d.html">
       importers.cathy_inputs.read_grid3d
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_raster.html">
       importers.cathy_inputs.read_raster
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_root_map.html">
       importers.cathy_inputs.read_root_map
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_soil.html">
       importers.cathy_inputs.read_soil
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/importers.cathy_inputs.read_zone.html">
       importers.cathy_inputs.read_zone
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       DA.cathy_DA
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.CATHY.html">
       DA.cathy_DA.CATHY
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.DA.html">
       DA.cathy_DA.DA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.partial.html">
       DA.cathy_DA.partial
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.Archie_pert_rules.html">
       DA.cathy_DA.Archie_pert_rules
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.Carsel_Parrish_VGN_pert.html">
       DA.cathy_DA.Carsel_Parrish_VGN_pert
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.Evensen2003.html">
       DA.cathy_DA.Evensen2003
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.Johnson1970.html">
       DA.cathy_DA.Johnson1970
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.VG_pert_rules.html">
       DA.cathy_DA.VG_pert_rules
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.atmbc_pert_rules.html">
       DA.cathy_DA.atmbc_pert_rules
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.build_dict_attributes_pert.html">
       DA.cathy_DA.build_dict_attributes_pert
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.dictObs_2pd.html">
       DA.cathy_DA.dictObs_2pd
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.perturbate_dist.html">
       DA.cathy_DA.perturbate_dist
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.perturbate_parm.html">
       DA.cathy_DA.perturbate_parm
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.resynchronise_times.html">
       DA.cathy_DA.resynchronise_times
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.run_analysis.html">
       DA.cathy_DA.run_analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.sampling_dist.html">
       DA.cathy_DA.sampling_dist
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.sampling_dist_trunc.html">
       DA.cathy_DA.sampling_dist_trunc
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.subprocess_run_multi.html">
       DA.cathy_DA.subprocess_run_multi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/DA.cathy_DA.track.html">
       DA.cathy_DA.track
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ERT.petro_Archie
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.Archie_rho_DA.html">
       ERT.petro_Archie.Archie_rho_DA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.CATHY_2_Resipy.html">
       ERT.petro_Archie.CATHY_2_Resipy
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.CATHY_2_pg.html">
       ERT.petro_Archie.CATHY_2_pg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.SW_2_ERa_DA.html">
       ERT.petro_Archie.SW_2_ERa_DA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.get_Archie_ens_i.html">
       ERT.petro_Archie.get_Archie_ens_i
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.get_sw_ens_i.html">
       ERT.petro_Archie.get_sw_ens_i
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.petro_Archie.print.html">
       ERT.petro_Archie.print
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ERT.simulate_ERT
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.R2.html">
       ERT.simulate_ERT.R2
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.Archie_ERT.html">
       ERT.simulate_ERT.Archie_ERT
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.create_ERT_survey_Resipy.html">
       ERT.simulate_ERT.create_ERT_survey_Resipy
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.create_ERT_survey_pg.html">
       ERT.simulate_ERT.create_ERT_survey_pg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.fwd_ERT_survey.html">
       ERT.simulate_ERT.fwd_ERT_survey
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/ERT.simulate_ERT.invert_ERT_survey.html">
       ERT.simulate_ERT.invert_ERT_survey
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/sensitivity.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       sensitivity
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.analysis_Morris.html">
       sensitivity.analysis_Morris
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.define_Morris.html">
       sensitivity.define_Morris
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.df_Morris.html">
       sensitivity.df_Morris
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.err_weighted_rmse.html">
       sensitivity.err_weighted_rmse
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.plot_Morris.html">
       sensitivity.plot_Morris
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.print_Morris_out.html">
       sensitivity.print_Morris_out
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.run_sensitivity_analysis.html">
       sensitivity.run_sensitivity_analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/sensitivity.samples_generation.html">
       sensitivity.samples_generation
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       plotters.cathy_plots
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.FormatStrFormatter.html">
       plotters.cathy_plots.FormatStrFormatter
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.LogNorm.html">
       plotters.cathy_plots.LogNorm
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.DA_RMS.html">
       plotters.cathy_plots.DA_RMS
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.DA_plot_Archie.html">
       plotters.cathy_plots.DA_plot_Archie
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.DA_plot_parm_dynamic.html">
       plotters.cathy_plots.DA_plot_parm_dynamic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.DA_plot_parm_dynamic_scatter.html">
       plotters.cathy_plots.DA_plot_parm_dynamic_scatter
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.DA_plot_time_dynamic.html">
       plotters.cathy_plots.DA_plot_time_dynamic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.change_x2date.html">
       plotters.cathy_plots.change_x2date
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.convert_time_units.html">
       plotters.cathy_plots.convert_time_units
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.dem_plot_2d_top.html">
       plotters.cathy_plots.dem_plot_2d_top
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.get_dem_coords.html">
       plotters.cathy_plots.get_dem_coords
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.label_units.html">
       plotters.cathy_plots.label_units
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.plot_VGP.html">
       plotters.cathy_plots.plot_VGP
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.plot_hist_perturbated_parm.html">
       plotters.cathy_plots.plot_hist_perturbated_parm
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.plot_mesh_bounds.html">
       plotters.cathy_plots.plot_mesh_bounds
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.prepare_DA_plot_time_dynamic.html">
       plotters.cathy_plots.prepare_DA_plot_time_dynamic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_COCumflowvol.html">
       plotters.cathy_plots.show_COCumflowvol
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_DA_process_ens.html">
       plotters.cathy_plots.show_DA_process_ens
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_atmbc.html">
       plotters.cathy_plots.show_atmbc
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_atmbc_3d.html">
       plotters.cathy_plots.show_atmbc_3d
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_dem.html">
       plotters.cathy_plots.show_dem
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_dtcoupling.html">
       plotters.cathy_plots.show_dtcoupling
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_hgraph.html">
       plotters.cathy_plots.show_hgraph
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_hgsfdet.html">
       plotters.cathy_plots.show_hgsfdet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_indice_veg.html">
       plotters.cathy_plots.show_indice_veg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_raster.html">
       plotters.cathy_plots.show_raster
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_soil.html">
       plotters.cathy_plots.show_soil
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_vp_DEPRECATED.html">
       plotters.cathy_plots.show_vp_DEPRECATED
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_vtk.html">
       plotters.cathy_plots.show_vtk
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_vtk_TL.html">
       plotters.cathy_plots.show_vtk_TL
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_wtdepth.html">
       plotters.cathy_plots.show_wtdepth
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.show_zone.html">
       plotters.cathy_plots.show_zone
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/plotters.cathy_plots.transform2_time_delta.html">
       plotters.cathy_plots.transform2_time_delta
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       pyCATHY.cathy_utils
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.change_x2date.html">
       pyCATHY.cathy_utils.change_x2date
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.convert_time_units.html">
       pyCATHY.cathy_utils.convert_time_units
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.dictObs_2pd.html">
       pyCATHY.cathy_utils.dictObs_2pd
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.kPa2cm.html">
       pyCATHY.cathy_utils.kPa2cm
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.kPa2m.html">
       pyCATHY.cathy_utils.kPa2m
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.label_units.html">
       pyCATHY.cathy_utils.label_units
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.cathy_utils.transform2_time_delta.html">
       pyCATHY.cathy_utils.transform2_time_delta
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       pyCATHY.meshtools
      </span>
     </code>
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.CATHY_2_Resipy.html">
       pyCATHY.meshtools.CATHY_2_Resipy
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.CATHY_2_Simpeg.html">
       pyCATHY.meshtools.CATHY_2_Simpeg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.CATHY_2_pg.html">
       pyCATHY.meshtools.CATHY_2_pg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.add_attribute_2mesh.html">
       pyCATHY.meshtools.add_attribute_2mesh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.add_markers2mesh.html">
       pyCATHY.meshtools.add_markers2mesh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.create_layers_inzones3d.html">
       pyCATHY.meshtools.create_layers_inzones3d
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.find_nearest_node.html">
       pyCATHY.meshtools.find_nearest_node
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.get_layer_depth.html">
       pyCATHY.meshtools.get_layer_depth
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.get_layer_depths.html">
       pyCATHY.meshtools.get_layer_depths
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.get_zone3d_layer_depths.html">
       pyCATHY.meshtools.get_zone3d_layer_depths
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.het_soil_layers_mapping_generic.html">
       pyCATHY.meshtools.het_soil_layers_mapping_generic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.map_layers_2_DEM.html">
       pyCATHY.meshtools.map_layers_2_DEM
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.plot_2d_interpolation_quality.html">
       pyCATHY.meshtools.plot_2d_interpolation_quality
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.plot_zones3d_layered.html">
       pyCATHY.meshtools.plot_zones3d_layered
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.set_interpolation_radius.html">
       pyCATHY.meshtools.set_interpolation_radius
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.trace_mesh.html">
       pyCATHY.meshtools.trace_mesh
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.trace_mesh_pg.html">
       pyCATHY.meshtools.trace_mesh_pg
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../../content/api/generated/pyCATHY.meshtools.zone3d.html">
       pyCATHY.meshtools.zone3d
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/change_log.html">
   Change log
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/cathy_list_citation.html">
   Who uses CATHY ?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/references.html">
   References
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting help and contributed
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../content/contribute.html">
   Contribute and support
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/BenjMy/pycathy_wrapper"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/BenjMy/pycathy_wrapper/issues/new?title=Issue%20on%20page%20%2F_modules/git/repo/base.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <h1>Source code for git.repo.base</h1><div class="highlight"><pre>
<span></span><span class="c1"># repo.py</span>
<span class="c1"># Copyright (C) 2008, 2009 Michael Trier (mtrier@gmail.com) and contributors</span>
<span class="c1">#</span>
<span class="c1"># This module is part of GitPython and is released under</span>
<span class="c1"># the BSD License: http://www.opensource.org/licenses/bsd-license.php</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">shlex</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">gitdb.db.loose</span> <span class="kn">import</span> <span class="n">LooseObjectDB</span>

<span class="kn">from</span> <span class="nn">gitdb.exc</span> <span class="kn">import</span> <span class="n">BadObject</span>

<span class="kn">from</span> <span class="nn">git.cmd</span> <span class="kn">import</span> <span class="n">Git</span><span class="p">,</span> <span class="n">handle_process_output</span>
<span class="kn">from</span> <span class="nn">git.compat</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">defenc</span><span class="p">,</span>
    <span class="n">safe_decode</span><span class="p">,</span>
    <span class="n">is_win</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">git.config</span> <span class="kn">import</span> <span class="n">GitConfigParser</span>
<span class="kn">from</span> <span class="nn">git.db</span> <span class="kn">import</span> <span class="n">GitCmdObjectDB</span>
<span class="kn">from</span> <span class="nn">git.exc</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">GitCommandError</span><span class="p">,</span>
    <span class="n">InvalidGitRepositoryError</span><span class="p">,</span>
    <span class="n">NoSuchPathError</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">git.index</span> <span class="kn">import</span> <span class="n">IndexFile</span>
<span class="kn">from</span> <span class="nn">git.objects</span> <span class="kn">import</span> <span class="n">Submodule</span><span class="p">,</span> <span class="n">RootModule</span><span class="p">,</span> <span class="n">Commit</span>
<span class="kn">from</span> <span class="nn">git.refs</span> <span class="kn">import</span> <span class="n">HEAD</span><span class="p">,</span> <span class="n">Head</span><span class="p">,</span> <span class="n">Reference</span><span class="p">,</span> <span class="n">TagReference</span>
<span class="kn">from</span> <span class="nn">git.remote</span> <span class="kn">import</span> <span class="n">Remote</span><span class="p">,</span> <span class="n">add_progress</span><span class="p">,</span> <span class="n">to_progress_instance</span>
<span class="kn">from</span> <span class="nn">git.util</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Actor</span><span class="p">,</span>
    <span class="n">finalize_process</span><span class="p">,</span>
    <span class="n">cygpath</span><span class="p">,</span>
    <span class="n">hex_to_bin</span><span class="p">,</span>
    <span class="n">expand_path</span><span class="p">,</span>
    <span class="n">remove_password_if_present</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">osp</span>

<span class="kn">from</span> <span class="nn">.fun</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">rev_parse</span><span class="p">,</span>
    <span class="n">is_git_dir</span><span class="p">,</span>
    <span class="n">find_submodule_git_dir</span><span class="p">,</span>
    <span class="n">touch</span><span class="p">,</span>
    <span class="n">find_worktree_git_dir</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">import</span> <span class="nn">gitdb</span>

<span class="c1"># typing ------------------------------------------------------</span>

<span class="kn">from</span> <span class="nn">git.types</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TBD</span><span class="p">,</span>
    <span class="n">PathLike</span><span class="p">,</span>
    <span class="n">Lit_config_levels</span><span class="p">,</span>
    <span class="n">Commit_ish</span><span class="p">,</span>
    <span class="n">Tree_ish</span><span class="p">,</span>
    <span class="n">assert_never</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">BinaryIO</span><span class="p">,</span>
    <span class="n">Callable</span><span class="p">,</span>
    <span class="n">Dict</span><span class="p">,</span>
    <span class="n">Iterator</span><span class="p">,</span>
    <span class="n">List</span><span class="p">,</span>
    <span class="n">Mapping</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">Sequence</span><span class="p">,</span>
    <span class="n">TextIO</span><span class="p">,</span>
    <span class="n">Tuple</span><span class="p">,</span>
    <span class="n">Type</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
    <span class="n">NamedTuple</span><span class="p">,</span>
    <span class="n">cast</span><span class="p">,</span>
    <span class="n">TYPE_CHECKING</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">git.types</span> <span class="kn">import</span> <span class="n">ConfigLevels_Tup</span><span class="p">,</span> <span class="n">TypedDict</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">git.util</span> <span class="kn">import</span> <span class="n">IterableList</span>
    <span class="kn">from</span> <span class="nn">git.refs.symbolic</span> <span class="kn">import</span> <span class="n">SymbolicReference</span>
    <span class="kn">from</span> <span class="nn">git.objects</span> <span class="kn">import</span> <span class="n">Tree</span>
    <span class="kn">from</span> <span class="nn">git.objects.submodule.base</span> <span class="kn">import</span> <span class="n">UpdateProgress</span>
    <span class="kn">from</span> <span class="nn">git.remote</span> <span class="kn">import</span> <span class="n">RemoteProgress</span>

<span class="c1"># -----------------------------------------------------------</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Repo&quot;</span><span class="p">,)</span>


<span class="k">class</span> <span class="nc">BlameEntry</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
    <span class="n">commit</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Commit&quot;</span><span class="p">]</span>
    <span class="n">linenos</span><span class="p">:</span> <span class="nb">range</span>
    <span class="n">orig_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">orig_linenos</span><span class="p">:</span> <span class="nb">range</span>


<div class="viewcode-block" id="Repo"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo">[docs]</a><span class="k">class</span> <span class="nc">Repo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a git repository and allows you to query references,</span>
<span class="sd">    gather commit information, generate diffs, create and clone repositories query</span>
<span class="sd">    the log.</span>

<span class="sd">    The following attributes are worth using:</span>

<span class="sd">    &#39;working_dir&#39; is the working directory of the git command, which is the working tree</span>
<span class="sd">    directory if available or the .git directory in case of bare repositories</span>

<span class="sd">    &#39;working_tree_dir&#39; is the working tree directory, but will raise AssertionError</span>
<span class="sd">    if we are a bare repository.</span>

<span class="sd">    &#39;git_dir&#39; is the .git repository directory, which is always set.&quot;&quot;&quot;</span>

    <span class="n">DAEMON_EXPORT_FILE</span> <span class="o">=</span> <span class="s2">&quot;git-daemon-export-ok&quot;</span>

    <span class="n">git</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Git&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Must exist, or  __del__  will fail in case we raise on `__init__()`</span>
    <span class="n">working_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_working_tree_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">git_dir</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">_common_dir</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># precompiled regex</span>
    <span class="n">re_whitespace</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">)</span>
    <span class="n">re_hexsha_only</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;^[0-9A-Fa-f]</span><span class="si">{40}</span><span class="s2">$&quot;</span><span class="p">)</span>
    <span class="n">re_hexsha_shortened</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;^[0-9A-Fa-f]{4,40}$&quot;</span><span class="p">)</span>
    <span class="n">re_envvars</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(\$(\{\s?)?[a-zA-Z_]\w*(\}\s?)?|%\s?[a-zA-Z_]\w*\s?%)&quot;</span><span class="p">)</span>
    <span class="n">re_author_committer_start</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^(author|committer)&quot;</span><span class="p">)</span>
    <span class="n">re_tab_full_line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\t(.*)$&quot;</span><span class="p">)</span>

    <span class="n">unsafe_git_clone_options</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># This option allows users to execute arbitrary commands.</span>
        <span class="c1"># https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---upload-packltupload-packgt</span>
        <span class="s2">&quot;--upload-pack&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-u&quot;</span><span class="p">,</span>
        <span class="c1"># Users can override configuration variables</span>
        <span class="c1"># like `protocol.allow` or `core.gitProxy` to execute arbitrary commands.</span>
        <span class="c1"># https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---configltkeygtltvaluegt</span>
        <span class="s2">&quot;--config&quot;</span><span class="p">,</span>
        <span class="s2">&quot;-c&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="c1"># invariants</span>
    <span class="c1"># represents the configuration level of a configuration file</span>
    <span class="n">config_level</span><span class="p">:</span> <span class="n">ConfigLevels_Tup</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;global&quot;</span><span class="p">,</span> <span class="s2">&quot;repository&quot;</span><span class="p">)</span>

    <span class="c1"># Subclass configuration</span>
    <span class="c1"># Subclasses may easily bring in their own custom types by placing a constructor or type here</span>
    <span class="n">GitCommandWrapperType</span> <span class="o">=</span> <span class="n">Git</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">odbt</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">LooseObjectDB</span><span class="p">]</span> <span class="o">=</span> <span class="n">GitCmdObjectDB</span><span class="p">,</span>
        <span class="n">search_parent_directories</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">expand_vars</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new Repo instance</span>

<span class="sd">        :param path:</span>
<span class="sd">            the path to either the root git directory or the bare git repo::</span>

<span class="sd">                repo = Repo(&quot;/Users/mtrier/Development/git-python&quot;)</span>
<span class="sd">                repo = Repo(&quot;/Users/mtrier/Development/git-python.git&quot;)</span>
<span class="sd">                repo = Repo(&quot;~/Development/git-python.git&quot;)</span>
<span class="sd">                repo = Repo(&quot;$REPOSITORIES/Development/git-python.git&quot;)</span>
<span class="sd">                repo = Repo(&quot;C:\\Users\\mtrier\\Development\\git-python\\.git&quot;)</span>

<span class="sd">            - In *Cygwin*, path may be a `&#39;cygdrive/...&#39;` prefixed path.</span>
<span class="sd">            - If it evaluates to false, :envvar:`GIT_DIR` is used, and if this also evals to false,</span>
<span class="sd">              the current-directory is used.</span>
<span class="sd">        :param odbt:</span>
<span class="sd">            Object DataBase type - a type which is constructed by providing</span>
<span class="sd">            the directory containing the database objects, i.e. .git/objects. It will</span>
<span class="sd">            be used to access all object data</span>
<span class="sd">        :param search_parent_directories:</span>
<span class="sd">            if True, all parent directories will be searched for a valid repo as well.</span>

<span class="sd">            Please note that this was the default behaviour in older versions of GitPython,</span>
<span class="sd">            which is considered a bug though.</span>
<span class="sd">        :raise InvalidGitRepositoryError:</span>
<span class="sd">        :raise NoSuchPathError:</span>
<span class="sd">        :return: git.Repo&quot;&quot;&quot;</span>

        <span class="n">epath</span> <span class="o">=</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;GIT_DIR&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">epath</span><span class="p">:</span>
            <span class="n">epath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Git</span><span class="o">.</span><span class="n">is_cygwin</span><span class="p">():</span>
            <span class="c1"># Given how the tests are written, this seems more likely to catch</span>
            <span class="c1"># Cygwin git used from Windows than Windows git used from Cygwin.</span>
            <span class="c1"># Therefore changing to Cygwin-style paths is the relevant operation.</span>
            <span class="n">epath</span> <span class="o">=</span> <span class="n">cygpath</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span>

        <span class="n">epath</span> <span class="o">=</span> <span class="n">epath</span> <span class="ow">or</span> <span class="n">path</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">epath</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">epath</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expand_vars</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">re_envvars</span><span class="p">,</span> <span class="n">epath</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;The use of environment variables in paths is deprecated&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">for security reasons and may be removed in the future!!&quot;</span>
            <span class="p">)</span>
        <span class="n">epath</span> <span class="o">=</span> <span class="n">expand_path</span><span class="p">(</span><span class="n">epath</span><span class="p">,</span> <span class="n">expand_vars</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">epath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">epath</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">NoSuchPathError</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span>

        <span class="c1">## Walk up the path to find the `.git` dir.</span>
        <span class="c1">#</span>
        <span class="n">curpath</span> <span class="o">=</span> <span class="n">epath</span>
        <span class="k">while</span> <span class="n">curpath</span><span class="p">:</span>
            <span class="c1"># ABOUT osp.NORMPATH</span>
            <span class="c1"># It&#39;s important to normalize the paths, as submodules will otherwise initialize their</span>
            <span class="c1"># repo instances with paths that depend on path-portions that will not exist after being</span>
            <span class="c1"># removed. It&#39;s just cleaner.</span>
            <span class="k">if</span> <span class="n">is_git_dir</span><span class="p">(</span><span class="n">curpath</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span> <span class="o">=</span> <span class="n">curpath</span>
                <span class="c1"># from man git-config : core.worktree</span>
                <span class="c1"># Set the path to the root of the working tree. If GIT_COMMON_DIR environment</span>
                <span class="c1"># variable is set, core.worktree is ignored and not used for determining the</span>
                <span class="c1"># root of working tree. This can be overridden by the GIT_WORK_TREE environment</span>
                <span class="c1"># variable. The value can be an absolute path or relative to the path to the .git</span>
                <span class="c1"># directory, which is either specified by GIT_DIR, or automatically discovered.</span>
                <span class="c1"># If GIT_DIR is specified but none of GIT_WORK_TREE and core.worktree is specified,</span>
                <span class="c1"># the current working directory is regarded as the top level of your working tree.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;GIT_COMMON_DIR&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">gitconf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_reader</span><span class="p">(</span><span class="s2">&quot;repository&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">gitconf</span><span class="o">.</span><span class="n">has_option</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;worktree&quot;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="o">=</span> <span class="n">gitconf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;worktree&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;GIT_WORK_TREE&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;GIT_WORK_TREE&quot;</span><span class="p">)</span>
                <span class="k">break</span>

            <span class="n">dotgit</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">curpath</span><span class="p">,</span> <span class="s2">&quot;.git&quot;</span><span class="p">)</span>
            <span class="n">sm_gitpath</span> <span class="o">=</span> <span class="n">find_submodule_git_dir</span><span class="p">(</span><span class="n">dotgit</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sm_gitpath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">sm_gitpath</span><span class="p">)</span>

            <span class="n">sm_gitpath</span> <span class="o">=</span> <span class="n">find_submodule_git_dir</span><span class="p">(</span><span class="n">dotgit</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sm_gitpath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">sm_gitpath</span> <span class="o">=</span> <span class="n">find_worktree_git_dir</span><span class="p">(</span><span class="n">dotgit</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">sm_gitpath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span> <span class="o">=</span> <span class="n">expand_path</span><span class="p">(</span><span class="n">sm_gitpath</span><span class="p">,</span> <span class="n">expand_vars</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="o">=</span> <span class="n">curpath</span>
                <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">search_parent_directories</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">curpath</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">curpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tail</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="c1"># END while curpath</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidGitRepositoryError</span><span class="p">(</span><span class="n">epath</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bare</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bare</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_reader</span><span class="p">(</span><span class="s2">&quot;repository&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getboolean</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;bare&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c1"># lets not assume the option exists, although it should</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">common_dir</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="s2">&quot;commondir&quot;</span><span class="p">),</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_common_dir</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="n">common_dir</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_common_dir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1"># adjust the wd in case we are actually bare - we didn&#39;t know that</span>
        <span class="c1"># in the first place</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bare</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># END working dir handling</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">git</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GitCommandWrapperType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">working_dir</span><span class="p">)</span>

        <span class="c1"># special handling, in special times</span>
        <span class="n">rootpath</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">common_dir</span><span class="p">,</span> <span class="s2">&quot;objects&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">odbt</span><span class="p">,</span> <span class="n">GitCmdObjectDB</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">odb</span> <span class="o">=</span> <span class="n">odbt</span><span class="p">(</span><span class="n">rootpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">odb</span> <span class="o">=</span> <span class="n">odbt</span><span class="p">(</span><span class="n">rootpath</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Repo&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>

<div class="viewcode-block" id="Repo.close"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">()</span>
            <span class="c1"># Tempfiles objects on Windows are holding references to</span>
            <span class="c1"># open files until they are collected by the garbage</span>
            <span class="c1"># collector, thus preventing deletion.</span>
            <span class="c1"># TODO: Find these references and ensure they are closed</span>
            <span class="c1"># and deleted synchronously rather than forcing a gc</span>
            <span class="c1"># collection.</span>
            <span class="k">if</span> <span class="n">is_win</span><span class="p">:</span>
                <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
            <span class="n">gitdb</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">mman</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">is_win</span><span class="p">:</span>
                <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Repo</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">git_dir</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">)</span>

    <span class="c1"># Description property</span>
    <span class="k">def</span> <span class="nf">_get_description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">defenc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">((</span><span class="n">descr</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">defenc</span><span class="p">))</span>

    <span class="n">description</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_description</span><span class="p">,</span> <span class="n">_set_description</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;the project&#39;s description&quot;</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">_get_description</span>
    <span class="k">del</span> <span class="n">_set_description</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">working_tree_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: The working tree directory of our git repository. If this is a bare repository, None is returned.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_working_tree_dir</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">common_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PathLike</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The git dir that holds everything except possibly HEAD,</span>
<span class="sd">            FETCH_HEAD, ORIG_HEAD, COMMIT_EDITMSG, index, and logs/.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_common_dir</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_common_dir</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># or could return &quot;&quot;</span>
            <span class="k">raise</span> <span class="n">InvalidGitRepositoryError</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bare</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: True if the repository is bare&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bare</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">heads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IterableList[Head]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of ``Head`` objects representing the branch heads in</span>
<span class="sd">        this repo</span>

<span class="sd">        :return: ``git.IterableList(Head, ...)``&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Head</span><span class="o">.</span><span class="n">list_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">references</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IterableList[Reference]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of Reference objects representing tags, heads and remote references.</span>

<span class="sd">        :return: IterableList(Reference, ...)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Reference</span><span class="o">.</span><span class="n">list_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># alias for references</span>
    <span class="n">refs</span> <span class="o">=</span> <span class="n">references</span>

    <span class="c1"># alias for heads</span>
    <span class="n">branches</span> <span class="o">=</span> <span class="n">heads</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IndexFile&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: IndexFile representing this repository&#39;s index.</span>
<span class="sd">        :note: This property can be expensive, as the returned ``IndexFile`` will be</span>
<span class="sd">         reinitialized. It&#39;s recommended to re-use the object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">IndexFile</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: HEAD Object pointing to the current head reference&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">HEAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">remotes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IterableList[Remote]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of Remote objects allowing to access and manipulate remotes</span>
<span class="sd">        :return: ``git.IterableList(Remote, ...)``&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Remote</span><span class="o">.</span><span class="n">list_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Repo.remote"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.remote">[docs]</a>    <span class="k">def</span> <span class="nf">remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;origin&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Remote&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: Remote with the specified name</span>
<span class="sd">        :raise ValueError:  if no remote with such a name exists&quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">r</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Remote named &#39;</span><span class="si">%s</span><span class="s2">&#39; didn&#39;t exist&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span></div>

    <span class="c1"># { Submodules</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">submodules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IterableList[Submodule]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: git.IterableList(Submodule, ...) of direct submodules</span>
<span class="sd">            available from the current head&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Submodule</span><span class="o">.</span><span class="n">list_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Repo.submodule"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.submodule">[docs]</a>    <span class="k">def</span> <span class="nf">submodule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Submodule&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: Submodule with the given name</span>
<span class="sd">        :raise ValueError: If no such submodule exists&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">submodules</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Didn&#39;t find submodule named </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></div>
        <span class="c1"># END exception handling</span>

<div class="viewcode-block" id="Repo.create_submodule"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.create_submodule">[docs]</a>    <span class="k">def</span> <span class="nf">create_submodule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Submodule</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new submodule</span>

<span class="sd">        :note: See the documentation of Submodule.add for a description of the</span>
<span class="sd">            applicable parameters</span>
<span class="sd">        :return: created submodules&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Submodule</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.iter_submodules"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.iter_submodules">[docs]</a>    <span class="k">def</span> <span class="nf">iter_submodules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Submodule</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;An iterator yielding Submodule instances, see Traversable interface</span>
<span class="sd">        for a description of args and kwargs</span>
<span class="sd">        :return: Iterator&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RootModule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">traverse</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.submodule_update"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.submodule_update">[docs]</a>    <span class="k">def</span> <span class="nf">submodule_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Submodule</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the submodules, keeping the repository consistent as it will</span>
<span class="sd">        take the previous state into consideration. For more information, please</span>
<span class="sd">        see the documentation of RootModule.update&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">RootModule</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="c1"># }END submodules</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;IterableList[TagReference]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of ``Tag`` objects that are available in this repo</span>
<span class="sd">        :return: ``git.IterableList(TagReference, ...)``&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TagReference</span><span class="o">.</span><span class="n">list_items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Repo.tag"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.tag">[docs]</a>    <span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagReference</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: TagReference Object, reference pointing to a Commit or Tag</span>
<span class="sd">        :param path: path to the tag reference, i.e. 0.1.5 or tags/0.1.5&quot;&quot;&quot;</span>
        <span class="n">full_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_full_tag_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TagReference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full_path</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_to_full_tag_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">path_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">TagReference</span><span class="o">.</span><span class="n">_common_path_default</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">path_str</span>
        <span class="k">if</span> <span class="n">path_str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">TagReference</span><span class="o">.</span><span class="n">_common_default</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Reference</span><span class="o">.</span><span class="n">_common_path_default</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">path_str</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TagReference</span><span class="o">.</span><span class="n">_common_path_default</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">path_str</span>

<div class="viewcode-block" id="Repo.create_head"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.create_head">[docs]</a>    <span class="k">def</span> <span class="nf">create_head</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">commit</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;SymbolicReference&quot;</span><span class="p">,</span> <span class="s2">&quot;str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">logmsg</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Head&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new head within the repository.</span>
<span class="sd">        For more documentation, please see the Head.create method.</span>

<span class="sd">        :return: newly created Head Reference&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Head</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">commit</span><span class="p">,</span> <span class="n">logmsg</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.delete_head"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.delete_head">[docs]</a>    <span class="k">def</span> <span class="nf">delete_head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">heads</span><span class="p">:</span> <span class="s2">&quot;Union[str, Head]&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the given heads</span>

<span class="sd">        :param kwargs: Additional keyword arguments to be passed to git-branch&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Head</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">heads</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.create_tag"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.create_tag">[docs]</a>    <span class="k">def</span> <span class="nf">create_tag</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">ref</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;SymbolicReference&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;HEAD&quot;</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TagReference</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new tag reference.</span>
<span class="sd">        For more documentation, please see the TagReference.create method.</span>

<span class="sd">        :return: TagReference object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TagReference</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">force</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.delete_tag"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.delete_tag">[docs]</a>    <span class="k">def</span> <span class="nf">delete_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">:</span> <span class="n">TagReference</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the given tag references&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TagReference</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">tags</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.create_remote"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.create_remote">[docs]</a>    <span class="k">def</span> <span class="nf">create_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Remote</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new remote.</span>

<span class="sd">        For more information, please see the documentation of the Remote.create</span>
<span class="sd">        methods</span>

<span class="sd">        :return: Remote reference&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Remote</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.delete_remote"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.delete_remote">[docs]</a>    <span class="k">def</span> <span class="nf">delete_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remote</span><span class="p">:</span> <span class="s2">&quot;Remote&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the given remote.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Remote</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remote</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_config_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_level</span><span class="p">:</span> <span class="n">Lit_config_levels</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># we do not support an absolute path of the gitconfig on windows ,</span>
        <span class="c1"># use the global config instead</span>
        <span class="k">if</span> <span class="n">is_win</span> <span class="ow">and</span> <span class="n">config_level</span> <span class="o">==</span> <span class="s2">&quot;system&quot;</span><span class="p">:</span>
            <span class="n">config_level</span> <span class="o">=</span> <span class="s2">&quot;global&quot;</span>

        <span class="k">if</span> <span class="n">config_level</span> <span class="o">==</span> <span class="s2">&quot;system&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;/etc/gitconfig&quot;</span>
        <span class="k">elif</span> <span class="n">config_level</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
            <span class="n">config_home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;XDG_CONFIG_HOME&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;HOME&quot;</span><span class="p">,</span> <span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.config&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config_home</span><span class="p">,</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">config_level</span> <span class="o">==</span> <span class="s2">&quot;global&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/.gitconfig&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">config_level</span> <span class="o">==</span> <span class="s2">&quot;repository&quot;</span><span class="p">:</span>
            <span class="n">repo_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_common_dir</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">repo_dir</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotADirectoryError</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">repo_dir</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="n">assert_never</span><span class="p">(</span>
                <span class="n">config_level</span><span class="p">,</span>  <span class="c1"># type:ignore[unreachable]</span>
                <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid configuration level: </span><span class="si">{</span><span class="n">config_level</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="p">)</span>

<div class="viewcode-block" id="Repo.config_reader"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.config_reader">[docs]</a>    <span class="k">def</span> <span class="nf">config_reader</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config_level</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Lit_config_levels</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GitConfigParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return:</span>
<span class="sd">            GitConfigParser allowing to read the full git configuration, but not to write it</span>

<span class="sd">            The configuration will include values from the system, user and repository</span>
<span class="sd">            configuration files.</span>

<span class="sd">        :param config_level:</span>
<span class="sd">            For possible values, see config_writer method</span>
<span class="sd">            If None, all applicable levels will be used. Specify a level in case</span>
<span class="sd">            you know which file you wish to read to prevent reading multiple files.</span>
<span class="sd">        :note: On windows, system configuration cannot currently be read as the path is</span>
<span class="sd">            unknown, instead the global path will be used.&quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">config_level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_config_path</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">Lit_config_levels</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_level</span>
                <span class="k">if</span> <span class="n">cast</span><span class="p">(</span><span class="n">Lit_config_levels</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_config_path</span><span class="p">(</span><span class="n">config_level</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">GitConfigParser</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">repo</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.config_writer"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.config_writer">[docs]</a>    <span class="k">def</span> <span class="nf">config_writer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_level</span><span class="p">:</span> <span class="n">Lit_config_levels</span> <span class="o">=</span> <span class="s2">&quot;repository&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GitConfigParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return:</span>
<span class="sd">            GitConfigParser allowing to write values of the specified configuration file level.</span>
<span class="sd">            Config writers should be retrieved, used to change the configuration, and written</span>
<span class="sd">            right away as they will lock the configuration file in question and prevent other&#39;s</span>
<span class="sd">            to write it.</span>

<span class="sd">        :param config_level:</span>
<span class="sd">            One of the following values</span>
<span class="sd">            system = system wide configuration file</span>
<span class="sd">            global = user level configuration file</span>
<span class="sd">            repository = configuration file for this repository only&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">GitConfigParser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_config_path</span><span class="p">(</span><span class="n">config_level</span><span class="p">),</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">repo</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.commit"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.commit">[docs]</a>    <span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rev</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Commit_ish</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Commit</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The Commit object for the specified revision</span>

<span class="sd">        :param rev: revision specifier, see git-rev-parse for viable options.</span>
<span class="sd">        :return: ``git.Commit``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rev</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">commit</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev_parse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rev</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;^0&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.iter_trees"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.iter_trees">[docs]</a>    <span class="k">def</span> <span class="nf">iter_trees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;Tree&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:return: Iterator yielding Tree objects</span>
<span class="sd">        :note: Takes all arguments known to iter_commits method&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">tree</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_commits</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span></div>

<div class="viewcode-block" id="Repo.tree"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.tree">[docs]</a>    <span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rev</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tree_ish</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Tree&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The Tree object for the given treeish revision</span>
<span class="sd">        Examples::</span>

<span class="sd">              repo.tree(repo.heads[0])</span>

<span class="sd">        :param rev: is a revision pointing to a Treeish ( being a commit or tree )</span>
<span class="sd">        :return: ``git.Tree``</span>

<span class="sd">        :note:</span>
<span class="sd">            If you need a non-root level tree, find it by iterating the root tree. Otherwise</span>
<span class="sd">            it cannot know about its path relative to the repository root and subsequent</span>
<span class="sd">            operations might have unexpected results.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rev</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">commit</span><span class="o">.</span><span class="n">tree</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev_parse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rev</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;^</span><span class="si">{tree}</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.iter_commits"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.iter_commits">[docs]</a>    <span class="k">def</span> <span class="nf">iter_commits</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rev</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Commit</span><span class="p">,</span> <span class="s2">&quot;SymbolicReference&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">paths</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Commit</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of Commit objects representing the history of a given ref/commit</span>

<span class="sd">        :param rev:</span>
<span class="sd">            revision specifier, see git-rev-parse for viable options.</span>
<span class="sd">            If None, the active branch will be used.</span>

<span class="sd">        :param paths:</span>
<span class="sd">            is an optional path or a list of paths; if set only commits that include the path</span>
<span class="sd">            or paths will be returned</span>

<span class="sd">        :param kwargs:</span>
<span class="sd">            Arguments to be passed to git-rev-list - common ones are</span>
<span class="sd">            max_count and skip</span>

<span class="sd">        :note: to receive only commits between two named revisions, use the</span>
<span class="sd">            &quot;revA...revB&quot; revision specifier</span>

<span class="sd">        :return: ``git.Commit[]``&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rev</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">commit</span>

        <span class="k">return</span> <span class="n">Commit</span><span class="o">.</span><span class="n">iter_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rev</span><span class="p">,</span> <span class="n">paths</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Repo.merge_base"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.merge_base">[docs]</a>    <span class="k">def</span> <span class="nf">merge_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">rev</span><span class="p">:</span> <span class="n">TBD</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Commit_ish</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the closest common ancestor for the given revision (e.g. Commits, Tags, References, etc)</span>

<span class="sd">        :param rev: At least two revs to find the common ancestor for.</span>
<span class="sd">        :param kwargs: Additional arguments to be passed to the repo.git.merge_base() command which does all the work.</span>
<span class="sd">        :return: A list of Commit objects. If --all was not specified as kwarg, the list will have at max one Commit,</span>
<span class="sd">            or is empty if no common merge base exists.</span>
<span class="sd">        :raises ValueError: If not at least two revs are provided</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rev</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Please specify at least two revs, got only </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">rev</span><span class="p">))</span>
        <span class="c1"># end handle input</span>

        <span class="n">res</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Commit_ish</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">merge_base</span><span class="p">(</span><span class="o">*</span><span class="n">rev</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>  <span class="c1"># List[str]</span>
        <span class="k">except</span> <span class="n">GitCommandError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">128</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># end handle invalid rev</span>
            <span class="c1"># Status code 1 is returned if there is no merge-base</span>
            <span class="c1"># (see https://github.com/git/git/blob/master/builtin/merge-base.c#L16)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="c1"># end exception handling</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
        <span class="c1"># end for each merge-base</span>

        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="Repo.is_ancestor"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.is_ancestor">[docs]</a>    <span class="k">def</span> <span class="nf">is_ancestor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ancestor_rev</span><span class="p">:</span> <span class="s2">&quot;Commit&quot;</span><span class="p">,</span> <span class="n">rev</span><span class="p">:</span> <span class="s2">&quot;Commit&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a commit is an ancestor of another</span>

<span class="sd">        :param ancestor_rev: Rev which should be an ancestor</span>
<span class="sd">        :param rev: Rev to test against ancestor_rev</span>
<span class="sd">        :return: ``True``, ancestor_rev is an ancestor to rev.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">merge_base</span><span class="p">(</span><span class="n">ancestor_rev</span><span class="p">,</span> <span class="n">rev</span><span class="p">,</span> <span class="n">is_ancestor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">GitCommandError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">err</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">raise</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="Repo.is_valid_object"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.is_valid_object">[docs]</a>    <span class="k">def</span> <span class="nf">is_valid_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sha</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_type</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">complete_sha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">odb</span><span class="o">.</span><span class="n">partial_to_complete_sha_hex</span><span class="p">(</span><span class="n">sha</span><span class="p">)</span>
            <span class="n">object_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">odb</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">complete_sha</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">object_type</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">object_info</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">object_type</span><span class="o">.</span><span class="n">encode</span><span class="p">():</span>
                    <span class="k">return</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="s2">&quot;Commit hash points to an object of type &#39;</span><span class="si">%s</span><span class="s2">&#39;. Requested were objects of type &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                        <span class="n">object_info</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span>
                        <span class="n">object_type</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">BadObject</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Commit hash is invalid.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">_get_daemon_export</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DAEMON_EXPORT_FILE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_daemon_export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">DAEMON_EXPORT_FILE</span><span class="p">)</span>
        <span class="n">fileexists</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">fileexists</span><span class="p">:</span>
            <span class="n">touch</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">and</span> <span class="n">fileexists</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">daemon_export</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">_get_daemon_export</span><span class="p">,</span>
        <span class="n">_set_daemon_export</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;If True, git-daemon may export this repository&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">del</span> <span class="n">_get_daemon_export</span>
    <span class="k">del</span> <span class="n">_set_daemon_export</span>

    <span class="k">def</span> <span class="nf">_get_alternates</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of alternates for this repo from which objects can be retrieved</span>

<span class="sd">        :return: list of strings being pathnames of alternates&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">alternates_path</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;alternates&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">alternates_path</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">alternates_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">alts</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">defenc</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">alts</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">_set_alternates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the alternates</span>

<span class="sd">        :param alts:</span>
<span class="sd">            is the array of string paths representing the alternates at which</span>
<span class="sd">            git should look for objects, i.e. /home/user/repo/.git/objects</span>

<span class="sd">        :raise NoSuchPathError:</span>
<span class="sd">        :note:</span>
<span class="sd">            The method does not check for the existence of the paths in alts</span>
<span class="sd">            as the caller is responsible.&quot;&quot;&quot;</span>
        <span class="n">alternates_path</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">common_dir</span><span class="p">,</span> <span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="s2">&quot;alternates&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">alts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">osp</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">alternates_path</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">alternates_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">alternates_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">alts</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">defenc</span><span class="p">))</span>

    <span class="n">alternates</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">_get_alternates</span><span class="p">,</span>
        <span class="n">_set_alternates</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Retrieve a list of alternates paths or set a list paths to be used as alternates&quot;</span><span class="p">,</span>
    <span class="p">)</span>

<div class="viewcode-block" id="Repo.is_dirty"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.is_dirty">[docs]</a>    <span class="k">def</span> <span class="nf">is_dirty</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">working_tree</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">untracked_files</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">submodules</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return:</span>
<span class="sd">            ``True``, the repository is considered dirty. By default it will react</span>
<span class="sd">            like a git-status without untracked files, hence it is dirty if the</span>
<span class="sd">            index or the working copy have changes.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bare</span><span class="p">:</span>
            <span class="c1"># Bare repositories with no associated working directory are</span>
            <span class="c1"># always considered to be clean.</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># start from the one which is fastest to evaluate</span>
        <span class="n">default_args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;--abbrev=40&quot;</span><span class="p">,</span> <span class="s2">&quot;--full-index&quot;</span><span class="p">,</span> <span class="s2">&quot;--raw&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">submodules</span><span class="p">:</span>
            <span class="n">default_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;--ignore-submodules&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">default_args</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
            <span class="c1"># diff index against HEAD</span>
            <span class="k">if</span> <span class="n">osp</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="s2">&quot;--cached&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">default_args</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># END index handling</span>
        <span class="k">if</span> <span class="n">working_tree</span><span class="p">:</span>
            <span class="c1"># diff index against working tree</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="o">*</span><span class="n">default_args</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># END working tree handling</span>
        <span class="k">if</span> <span class="n">untracked_files</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_untracked_files</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">ignore_submodules</span><span class="o">=</span><span class="ow">not</span> <span class="n">submodules</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># END untracked files</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">untracked_files</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return:</span>
<span class="sd">            list(str,...)</span>

<span class="sd">            Files currently untracked as they have not been staged yet. Paths</span>
<span class="sd">            are relative to the current working directory of the git command.</span>

<span class="sd">        :note:</span>
<span class="sd">            ignored files will not appear here, i.e. files mentioned in .gitignore</span>
<span class="sd">        :note:</span>
<span class="sd">            This property is expensive, as no cache is involved. To process the result, please</span>
<span class="sd">            consider caching it yourself.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_untracked_files</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_get_untracked_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="c1"># make sure we get all files, not only untracked directories</span>
        <span class="n">proc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">porcelain</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">untracked_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_process</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Untracked files prefix in porcelain mode</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;?? &quot;</span>
        <span class="n">untracked_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">defenc</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="p">:]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Special characters are escaped</span>
            <span class="k">if</span> <span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1"># WHATEVER ... it&#39;s a mess, but works for me</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;latin1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">defenc</span><span class="p">)</span>
            <span class="n">untracked_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">finalize_process</span><span class="p">(</span><span class="n">proc</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">untracked_files</span>

<div class="viewcode-block" id="Repo.ignored"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.ignored">[docs]</a>    <span class="k">def</span> <span class="nf">ignored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">paths</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if paths are ignored via .gitignore</span>
<span class="sd">        Doing so using the &quot;git check-ignore&quot; method.</span>

<span class="sd">        :param paths: List of paths to check whether they are ignored or not</span>
<span class="sd">        :return: subset of those paths which are ignored</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">proc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">check_ignore</span><span class="p">(</span><span class="o">*</span><span class="n">paths</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">GitCommandError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">proc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Head</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the currently active branch.</span>

<span class="sd">        :raises	TypeError: If HEAD is detached</span>
<span class="sd">        :return: Head to the active branch&quot;&quot;&quot;</span>
        <span class="c1"># reveal_type(self.head.reference)  # =&gt; Reference</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">reference</span>

<div class="viewcode-block" id="Repo.blame_incremental"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.blame_incremental">[docs]</a>    <span class="k">def</span> <span class="nf">blame_incremental</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rev</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">HEAD</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;BlameEntry&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator for blame information for the given file at the given revision.</span>

<span class="sd">        Unlike .blame(), this does not return the actual file&#39;s contents, only</span>
<span class="sd">        a stream of BlameEntry tuples.</span>

<span class="sd">        :param rev: revision specifier, see git-rev-parse for viable options.</span>
<span class="sd">        :return: lazy iterator of BlameEntry tuples, where the commit</span>
<span class="sd">                 indicates the commit to blame for the line, and range</span>
<span class="sd">                 indicates a span of line numbers in the resulting file.</span>

<span class="sd">        If you combine all line number ranges outputted by this command, you</span>
<span class="sd">        should get a continuous range spanning all line numbers in the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">blame</span><span class="p">(</span><span class="n">rev</span><span class="p">,</span> <span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">incremental</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout_as_string</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">commits</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">Commit</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">stream</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">line</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>  <span class="c1"># when exhausted, causes a StopIteration, terminating this function</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">split_line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">hexsha</span><span class="p">,</span> <span class="n">orig_lineno_b</span><span class="p">,</span> <span class="n">lineno_b</span><span class="p">,</span> <span class="n">num_lines_b</span> <span class="o">=</span> <span class="n">split_line</span>
            <span class="n">lineno</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lineno_b</span><span class="p">)</span>
            <span class="n">num_lines</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_lines_b</span><span class="p">)</span>
            <span class="n">orig_lineno</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">orig_lineno_b</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">hexsha</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">commits</span><span class="p">:</span>
                <span class="c1"># Now read the next few lines and build up a dict of properties</span>
                <span class="c1"># for this commit</span>
                <span class="n">props</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                        <span class="k">return</span>
                    <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;boundary&quot;</span><span class="p">:</span>
                        <span class="c1"># &quot;boundary&quot; indicates a root commit and occurs</span>
                        <span class="c1"># instead of the &quot;previous&quot; tag</span>
                        <span class="k">continue</span>

                    <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">props</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                    <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span>
                        <span class="c1"># &quot;filename&quot; formally terminates the entry for --incremental</span>
                        <span class="n">orig_filename</span> <span class="o">=</span> <span class="n">value</span>
                        <span class="k">break</span>

                <span class="n">c</span> <span class="o">=</span> <span class="n">Commit</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">hex_to_bin</span><span class="p">(</span><span class="n">hexsha</span><span class="p">),</span>
                    <span class="n">author</span><span class="o">=</span><span class="n">Actor</span><span class="p">(</span>
                        <span class="n">safe_decode</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;author&quot;</span><span class="p">]),</span>
                        <span class="n">safe_decode</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;author-mail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)),</span>
                    <span class="p">),</span>
                    <span class="n">authored_date</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;author-time&quot;</span><span class="p">]),</span>
                    <span class="n">committer</span><span class="o">=</span><span class="n">Actor</span><span class="p">(</span>
                        <span class="n">safe_decode</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;committer&quot;</span><span class="p">]),</span>
                        <span class="n">safe_decode</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;committer-mail&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&gt;&quot;</span><span class="p">)),</span>
                    <span class="p">),</span>
                    <span class="n">committed_date</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="sa">b</span><span class="s2">&quot;committer-time&quot;</span><span class="p">]),</span>
                <span class="p">)</span>
                <span class="n">commits</span><span class="p">[</span><span class="n">hexsha</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Discard all lines until we find &quot;filename&quot; which is</span>
                <span class="c1"># guaranteed to be the last line</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>  <span class="c1"># will fail if we reach the EOF unexpectedly</span>
                    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                        <span class="k">return</span>
                    <span class="n">tag</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">tag</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span>
                        <span class="n">orig_filename</span> <span class="o">=</span> <span class="n">value</span>
                        <span class="k">break</span>

            <span class="k">yield</span> <span class="n">BlameEntry</span><span class="p">(</span>
                <span class="n">commits</span><span class="p">[</span><span class="n">hexsha</span><span class="p">],</span>
                <span class="nb">range</span><span class="p">(</span><span class="n">lineno</span><span class="p">,</span> <span class="n">lineno</span> <span class="o">+</span> <span class="n">num_lines</span><span class="p">),</span>
                <span class="n">safe_decode</span><span class="p">(</span><span class="n">orig_filename</span><span class="p">),</span>
                <span class="nb">range</span><span class="p">(</span><span class="n">orig_lineno</span><span class="p">,</span> <span class="n">orig_lineno</span> <span class="o">+</span> <span class="n">num_lines</span><span class="p">),</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="Repo.blame"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.blame">[docs]</a>    <span class="k">def</span> <span class="nf">blame</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rev</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">HEAD</span><span class="p">],</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">incremental</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">rev_opts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Commit</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">BlameEntry</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The blame information for the given file at the given revision.</span>

<span class="sd">        :param rev: revision specifier, see git-rev-parse for viable options.</span>
<span class="sd">        :return:</span>
<span class="sd">            list: [git.Commit, list: [&lt;line&gt;]]</span>
<span class="sd">            A list of lists associating a Commit object with a list of lines that</span>
<span class="sd">            changed within the given commit. The Commit objects will be given in order</span>
<span class="sd">            of appearance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">incremental</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">blame_incremental</span><span class="p">(</span><span class="n">rev</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">rev_opts</span> <span class="o">=</span> <span class="n">rev_opts</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">blame</span><span class="p">(</span><span class="n">rev</span><span class="p">,</span> <span class="o">*</span><span class="n">rev_opts</span><span class="p">,</span> <span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout_as_string</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">commits</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Commit</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">blames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Commit</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">class</span> <span class="nc">InfoTD</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">sha</span><span class="p">:</span> <span class="nb">str</span>
            <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">author</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">author_email</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">author_date</span><span class="p">:</span> <span class="nb">int</span>
            <span class="n">committer</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">committer_email</span><span class="p">:</span> <span class="nb">str</span>
            <span class="n">committer_date</span><span class="p">:</span> <span class="nb">int</span>

        <span class="n">info</span><span class="p">:</span> <span class="n">InfoTD</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">keepends</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">line_bytes</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="n">keepends</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line_str</span> <span class="o">=</span> <span class="n">line_bytes</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">defenc</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
                <span class="n">firstpart</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">is_binary</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># As we don&#39;t have an idea when the binary data ends, as it could contain multiple newlines</span>
                <span class="c1"># in the process. So we rely on being able to decode to tell us what is is.</span>
                <span class="c1"># This can absolutely fail even on text files, but even if it does, we should be fine treating it</span>
                <span class="c1"># as binary instead</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">re_whitespace</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">line_str</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">firstpart</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">is_binary</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1"># end handle decode of line</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">re_hexsha_only</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">firstpart</span><span class="p">):</span>
                <span class="c1"># handles</span>
                <span class="c1"># 634396b2f541a9f2d58b00be1a07f0c358b999b3 1 1 7        - indicates blame-data start</span>
                <span class="c1"># 634396b2f541a9f2d58b00be1a07f0c358b999b3 2 2          - indicates</span>
                <span class="c1"># another line of blame with the same data</span>
                <span class="n">digits</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">firstpart</span><span class="p">}</span>
                    <span class="n">blames</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="p">[]])</span>
                <span class="k">elif</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">firstpart</span><span class="p">:</span>
                    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">firstpart</span><span class="p">}</span>
                    <span class="n">blames</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">commits</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">firstpart</span><span class="p">),</span> <span class="p">[]])</span>
                <span class="c1"># END blame data initialization</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">re_author_committer_start</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">firstpart</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
                    <span class="c1"># handles:</span>
                    <span class="c1"># author Tom Preston-Werner</span>
                    <span class="c1"># author-mail &lt;tom@mojombo.com&gt;</span>
                    <span class="c1"># author-time 1192271832</span>
                    <span class="c1"># author-tz -0700</span>
                    <span class="c1"># committer Tom Preston-Werner</span>
                    <span class="c1"># committer-mail &lt;tom@mojombo.com&gt;</span>
                    <span class="c1"># committer-time 1192271832</span>
                    <span class="c1"># committer-tz -0700  - IGNORED BY US</span>
                    <span class="n">role</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;author&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-mail&quot;</span><span class="p">):</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;author_email&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-time&quot;</span><span class="p">):</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;author_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">role</span> <span class="o">==</span> <span class="n">firstpart</span><span class="p">:</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;author&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">role</span> <span class="o">==</span> <span class="s2">&quot;committer&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-mail&quot;</span><span class="p">):</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;committer_email&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-time&quot;</span><span class="p">):</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;committer_date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">role</span> <span class="o">==</span> <span class="n">firstpart</span><span class="p">:</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;committer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1"># END distinguish mail,time,name</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># handle</span>
                    <span class="c1"># filename lib/grit.rb</span>
                    <span class="c1"># summary add Blob</span>
                    <span class="c1"># &lt;and rest&gt;</span>
                    <span class="k">if</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;filename&quot;</span><span class="p">):</span>
                        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">firstpart</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;summary&quot;</span><span class="p">):</span>
                        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;summary&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">firstpart</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">info</span><span class="p">:</span>
                            <span class="n">sha</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
                            <span class="n">c</span> <span class="o">=</span> <span class="n">commits</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sha</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">c</span> <span class="o">=</span> <span class="n">Commit</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="p">,</span>
                                    <span class="n">hex_to_bin</span><span class="p">(</span><span class="n">sha</span><span class="p">),</span>
                                    <span class="n">author</span><span class="o">=</span><span class="n">Actor</span><span class="o">.</span><span class="n">_from_string</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;author_email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                                    <span class="n">authored_date</span><span class="o">=</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;author_date&quot;</span><span class="p">],</span>
                                    <span class="n">committer</span><span class="o">=</span><span class="n">Actor</span><span class="o">.</span><span class="n">_from_string</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;committer&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;committer_email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                                    <span class="n">committed_date</span><span class="o">=</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;committer_date&quot;</span><span class="p">],</span>
                                <span class="p">)</span>
                                <span class="n">commits</span><span class="p">[</span><span class="n">sha</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                            <span class="n">blames</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                            <span class="c1"># END if commit objects needs initial creation</span>

                            <span class="k">if</span> <span class="n">blames</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">line</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_binary</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">line_str</span> <span class="ow">and</span> <span class="n">line_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">:</span>
                                        <span class="n">line_str</span> <span class="o">=</span> <span class="n">line_str</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                                    <span class="n">line</span> <span class="o">=</span> <span class="n">line_str</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">line</span> <span class="o">=</span> <span class="n">line_bytes</span>
                                    <span class="c1"># NOTE: We are actually parsing lines out of binary data, which can lead to the</span>
                                    <span class="c1"># binary being split up along the newline separator. We will append this to the</span>
                                    <span class="c1"># blame we are currently looking at, even though it should be concatenated with</span>
                                    <span class="c1"># the last line we have seen.</span>
                                <span class="n">blames</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

                            <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">sha</span><span class="p">}</span>
                        <span class="c1"># END if we collected commit info</span>
                    <span class="c1"># END distinguish filename,summary,rest</span>
                <span class="c1"># END distinguish author|committer vs filename,summary,rest</span>
            <span class="c1"># END distinguish hexsha vs other information</span>
        <span class="k">return</span> <span class="n">blames</span></div>

<div class="viewcode-block" id="Repo.init"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.init">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PathLike</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mkdir</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">odbt</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">GitCmdObjectDB</span><span class="p">]</span> <span class="o">=</span> <span class="n">GitCmdObjectDB</span><span class="p">,</span>
        <span class="n">expand_vars</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Repo&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a git repository at the given path if specified</span>

<span class="sd">        :param path:</span>
<span class="sd">            is the full path to the repo (traditionally ends with /&lt;name&gt;.git)</span>
<span class="sd">            or None in which case the repository will be created in the current</span>
<span class="sd">            working directory</span>

<span class="sd">        :param mkdir:</span>
<span class="sd">            if specified will create the repository directory if it doesn&#39;t</span>
<span class="sd">            already exists. Creates the directory with a mode=0755.</span>
<span class="sd">            Only effective if a path is explicitly given</span>

<span class="sd">        :param odbt:</span>
<span class="sd">            Object DataBase type - a type which is constructed by providing</span>
<span class="sd">            the directory containing the database objects, i.e. .git/objects.</span>
<span class="sd">            It will be used to access all object data</span>

<span class="sd">        :param expand_vars:</span>
<span class="sd">            if specified, environment variables will not be escaped. This</span>
<span class="sd">            can lead to information disclosure, allowing attackers to</span>
<span class="sd">            access the contents of environment variables</span>

<span class="sd">        :param kwargs:</span>
<span class="sd">            keyword arguments serving as additional options to the git-init command</span>

<span class="sd">        :return: ``git.Repo`` (the newly created repo)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">expand_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">expand_vars</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mkdir</span> <span class="ow">and</span> <span class="n">path</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">osp</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="mo">0o755</span><span class="p">)</span>

        <span class="c1"># git command automatically chdir into the directory</span>
        <span class="n">git</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">GitCommandWrapperType</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">git</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">odbt</span><span class="o">=</span><span class="n">odbt</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_clone</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">git</span><span class="p">:</span> <span class="s2">&quot;Git&quot;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">odb_default_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">GitCmdObjectDB</span><span class="p">],</span>
        <span class="n">progress</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;RemoteProgress&quot;</span><span class="p">,</span> <span class="s2">&quot;UpdateProgress&quot;</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="s2">&quot;RemoteProgress&quot;</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multi_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_unsafe_protocols</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_unsafe_options</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Repo&quot;</span><span class="p">:</span>
        <span class="n">odbt</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;odbt&quot;</span><span class="p">,</span> <span class="n">odb_default_type</span><span class="p">)</span>

        <span class="c1"># when pathlib.Path or other classbased path is passed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1">## A bug win cygwin&#39;s Git, when `--bare` or `--separate-git-dir`</span>
        <span class="c1">#  it prepends the cwd or(?) the `url` into the `path, so::</span>
        <span class="c1">#        git clone --bare  /cygwin/d/foo.git  C:\\Work</span>
        <span class="c1">#  becomes::</span>
        <span class="c1">#        git clone --bare  /cygwin/d/foo.git  /cygwin/d/C:\\Work</span>
        <span class="c1">#</span>
        <span class="n">clone_path</span> <span class="o">=</span> <span class="n">Git</span><span class="o">.</span><span class="n">polish_url</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">Git</span><span class="o">.</span><span class="n">is_cygwin</span><span class="p">()</span> <span class="ow">and</span> <span class="s2">&quot;bare&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="n">path</span>
        <span class="n">sep_dir</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;separate_git_dir&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sep_dir</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;separate_git_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Git</span><span class="o">.</span><span class="n">polish_url</span><span class="p">(</span><span class="n">sep_dir</span><span class="p">)</span>
        <span class="n">multi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">multi_options</span><span class="p">:</span>
            <span class="n">multi</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">multi_options</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_unsafe_protocols</span><span class="p">:</span>
            <span class="n">Git</span><span class="o">.</span><span class="n">check_unsafe_protocols</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_unsafe_options</span> <span class="ow">and</span> <span class="n">multi_options</span><span class="p">:</span>
            <span class="n">Git</span><span class="o">.</span><span class="n">check_unsafe_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">multi_options</span><span class="p">,</span> <span class="n">unsafe_options</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">unsafe_git_clone_options</span><span class="p">)</span>

        <span class="n">proc</span> <span class="o">=</span> <span class="n">git</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span>
            <span class="n">multi</span><span class="p">,</span>
            <span class="s2">&quot;--&quot;</span><span class="p">,</span>
            <span class="n">Git</span><span class="o">.</span><span class="n">polish_url</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">)),</span>
            <span class="n">clone_path</span><span class="p">,</span>
            <span class="n">with_extended_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">as_process</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">v</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">add_progress</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">git</span><span class="p">,</span> <span class="n">progress</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">progress</span><span class="p">:</span>
            <span class="n">handle_process_output</span><span class="p">(</span>
                <span class="n">proc</span><span class="p">,</span>
                <span class="kc">None</span><span class="p">,</span>
                <span class="n">to_progress_instance</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span><span class="o">.</span><span class="n">new_message_handler</span><span class="p">(),</span>
                <span class="n">finalize_process</span><span class="p">,</span>
                <span class="n">decode_streams</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">)</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
            <span class="n">cmdline</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">proc</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">cmdline</span> <span class="o">=</span> <span class="n">remove_password_if_present</span><span class="p">(</span><span class="n">cmdline</span><span class="p">)</span>

            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cmd(</span><span class="si">%s</span><span class="s2">)&#39;s unused stdout: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">cmdline</span><span class="p">,</span> <span class="n">stdout</span><span class="p">)</span>
            <span class="n">finalize_process</span><span class="p">(</span><span class="n">proc</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">stderr</span><span class="p">)</span>

        <span class="c1"># our git command could have a different working dir than our actual</span>
        <span class="c1"># environment, hence we prepend its working dir if required</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">osp</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">git</span><span class="o">.</span><span class="n">_working_dir</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span> <span class="k">if</span> <span class="n">git</span><span class="o">.</span><span class="n">_working_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">path</span>

        <span class="n">repo</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">odbt</span><span class="o">=</span><span class="n">odbt</span><span class="p">)</span>

        <span class="c1"># retain env values that were passed to _clone()</span>
        <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">update_environment</span><span class="p">(</span><span class="o">**</span><span class="n">git</span><span class="o">.</span><span class="n">environment</span><span class="p">())</span>

        <span class="c1"># adjust remotes - there may be operating systems which use backslashes,</span>
        <span class="c1"># These might be given as initial paths, but when handling the config file</span>
        <span class="c1"># that contains the remote from which we were clones, git stops liking it</span>
        <span class="c1"># as it will escape the backslashes. Hence we undo the escaping just to be</span>
        <span class="c1"># sure</span>
        <span class="k">if</span> <span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">config_writer</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="n">Git</span><span class="o">.</span><span class="n">polish_url</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">))</span>
        <span class="c1"># END handle remote repo</span>
        <span class="k">return</span> <span class="n">repo</span>

<div class="viewcode-block" id="Repo.clone"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.clone">[docs]</a>    <span class="k">def</span> <span class="nf">clone</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">progress</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multi_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_unsafe_protocols</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_unsafe_options</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Repo&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a clone from this repository.</span>

<span class="sd">        :param path: is the full path of the new repo (traditionally ends with ./&lt;name&gt;.git).</span>
<span class="sd">        :param progress: See &#39;git.remote.Remote.push&#39;.</span>
<span class="sd">        :param multi_options: A list of Clone options that can be provided multiple times.  One</span>
<span class="sd">            option per list item which is passed exactly as specified to clone.</span>
<span class="sd">            For example [&#39;--config core.filemode=false&#39;, &#39;--config core.ignorecase&#39;,</span>
<span class="sd">            &#39;--recurse-submodule=repo1_path&#39;, &#39;--recurse-submodule=repo2_path&#39;]</span>
<span class="sd">        :param unsafe_protocols: Allow unsafe protocols to be used, like ext</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">            * odbt = ObjectDatabase Type, allowing to determine the object database</span>
<span class="sd">              implementation used by the returned Repo instance</span>
<span class="sd">            * All remaining keyword arguments are given to the git-clone command</span>

<span class="sd">        :return: ``git.Repo`` (the newly cloned repo)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clone</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">common_dir</span><span class="p">,</span>
            <span class="n">path</span><span class="p">,</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">odb</span><span class="p">),</span>
            <span class="n">progress</span><span class="p">,</span>
            <span class="n">multi_options</span><span class="p">,</span>
            <span class="n">allow_unsafe_protocols</span><span class="o">=</span><span class="n">allow_unsafe_protocols</span><span class="p">,</span>
            <span class="n">allow_unsafe_options</span><span class="o">=</span><span class="n">allow_unsafe_options</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Repo.clone_from"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.clone_from">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">clone_from</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">to_path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
        <span class="n">progress</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multi_options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_unsafe_protocols</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">allow_unsafe_options</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Repo&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a clone from the given URL</span>

<span class="sd">        :param url: valid git url, see http://www.kernel.org/pub/software/scm/git/docs/git-clone.html#URLS</span>
<span class="sd">        :param to_path: Path to which the repository should be cloned to</span>
<span class="sd">        :param progress: See &#39;git.remote.Remote.push&#39;.</span>
<span class="sd">        :param env: Optional dictionary containing the desired environment variables.</span>
<span class="sd">            Note: Provided variables will be used to update the execution</span>
<span class="sd">            environment for `git`. If some variable is not specified in `env`</span>
<span class="sd">            and is defined in `os.environ`, value from `os.environ` will be used.</span>
<span class="sd">            If you want to unset some variable, consider providing empty string</span>
<span class="sd">            as its value.</span>
<span class="sd">        :param multi_options: See ``clone`` method</span>
<span class="sd">        :param unsafe_protocols: Allow unsafe protocols to be used, like ext</span>
<span class="sd">        :param kwargs: see the ``clone`` method</span>
<span class="sd">        :return: Repo instance pointing to the cloned directory&quot;&quot;&quot;</span>
        <span class="n">git</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">GitCommandWrapperType</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">env</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">git</span><span class="o">.</span><span class="n">update_environment</span><span class="p">(</span><span class="o">**</span><span class="n">env</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_clone</span><span class="p">(</span>
            <span class="n">git</span><span class="p">,</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">to_path</span><span class="p">,</span>
            <span class="n">GitCmdObjectDB</span><span class="p">,</span>
            <span class="n">progress</span><span class="p">,</span>
            <span class="n">multi_options</span><span class="p">,</span>
            <span class="n">allow_unsafe_protocols</span><span class="o">=</span><span class="n">allow_unsafe_protocols</span><span class="p">,</span>
            <span class="n">allow_unsafe_options</span><span class="o">=</span><span class="n">allow_unsafe_options</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Repo.archive"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.archive">[docs]</a>    <span class="k">def</span> <span class="nf">archive</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ostream</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">TextIO</span><span class="p">,</span> <span class="n">BinaryIO</span><span class="p">],</span>
        <span class="n">treeish</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Repo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Archive the tree at the given revision.</span>

<span class="sd">        :param ostream: file compatible stream object to which the archive will be written as bytes</span>
<span class="sd">        :param treeish: is the treeish name/id, defaults to active branch</span>
<span class="sd">        :param prefix: is the optional prefix to prepend to each filename in the archive</span>
<span class="sd">        :param kwargs: Additional arguments passed to git-archive</span>

<span class="sd">            * Use the &#39;format&#39; argument to define the kind of format. Use</span>
<span class="sd">              specialized ostreams to write any format supported by python.</span>
<span class="sd">            * You may specify the special **path** keyword, which may either be a repository-relative</span>
<span class="sd">              path to a directory or file to place into the archive, or a list or tuple of multiple paths.</span>

<span class="sd">        :raise GitCommandError: in case something went wrong</span>
<span class="sd">        :return: self&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">treeish</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">treeish</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">commit</span>
        <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="s2">&quot;prefix&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;prefix&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;output_stream&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ostream</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Union</span><span class="p">[</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PathLike</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PathLike</span><span class="p">,</span> <span class="o">...</span><span class="p">]],</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span>
        <span class="c1"># end assure paths is list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">archive</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">treeish</span><span class="p">,</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Repo.has_separate_working_tree"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.has_separate_working_tree">[docs]</a>    <span class="k">def</span> <span class="nf">has_separate_working_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: True if our git_dir is not at the root of our working_tree_dir, but a .git file with a</span>
<span class="sd">            platform agnositic symbolic link. Our git_dir will be wherever the .git file points to</span>
<span class="sd">        :note: bare repositories will always return False here</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bare</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">working_tree_dir</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">osp</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">working_tree_dir</span><span class="p">,</span> <span class="s2">&quot;.git&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># or raise Error?</span></div>

    <span class="n">rev_parse</span> <span class="o">=</span> <span class="n">rev_parse</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">clazz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2"> </span><span class="si">%r</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">clazz</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">clazz</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">)</span>

<div class="viewcode-block" id="Repo.currently_rebasing_on"><a class="viewcode-back" href="../../../content/api/generated/cathy_tools.Repo.html#cathy_tools.Repo.currently_rebasing_on">[docs]</a>    <span class="k">def</span> <span class="nf">currently_rebasing_on</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Commit</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The commit which is currently being replayed while rebasing.</span>

<span class="sd">        None if we are not currently rebasing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">:</span>
            <span class="n">rebase_head_file</span> <span class="o">=</span> <span class="n">osp</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">git_dir</span><span class="p">,</span> <span class="s2">&quot;REBASE_HEAD&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">osp</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">rebase_head_file</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">rebase_head_file</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span></div></div>
</pre></div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By B. Mary<br/>
    
        &copy; Copyright 2022, B. Mary.<br/>
      Last updated on Feb 10, 2023.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>